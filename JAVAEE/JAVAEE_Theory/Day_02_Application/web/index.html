<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<h1>Welcome</h1>
<p>This is simple html doc</p>
<!--<button id="btn">Click</button>-->
<!--<button id="btn-ajax">Click AJAX</button>-->
<!--<button id="btn-ajax-get">Save</button>-->
<input id="id" type="text" placeholder="Enter ID">
<input id="name" type="text" placeholder="Name">
<input id="address" type="text" placeholder="Address">

<button id="btn-ajax-post">Save</button>
<button id="btn-ajax-put">Update</button>
<button id="btn-ajax-delete">Delete</button>
<script src="jquery.js"></script>
<!--<p id="show"></p>-->
<div id="content" style="width: 100px; height: 100px; display: flex; border: 1px;">

</div>
<div id="content-ajax" style="width: 100px; height: 100px; display: flex; border: 1px;"></div>
<script>

    $('#btn').click(function () {
        // alert('Button was clicked!')
        var http = new XMLHttpRequest();
        http.open('GET', 'https://jsonplaceholder.typicode.com/posts');// 2nd step: tells need 2 args-> request krna data eke type and source/endpoint
        http.send();//1st step: tells state not open
        //onreadystatechange bcoz after clickin btn it takes a few time to bring response
        //js doesnt have threads, its a single threaded scripting lang thereby
        //it has event loop to get multi threading effect even though single threaded
        http.onreadystatechange = function () {
            if (http.readyState === 4 && http.status === 200) {
                // $('#show').post(function (event) {
                //     http.responseText
                // });
                console.log(http.responseText);
                // } else if(http.readyState === 4 && http.status !== 200) {
                //     console.log("Error")
                // } else if (http.readyState<4) {
                //     console.log("Loading...");

                var data=JSON.parse(http.responseText);
                for (var i=0; i<data.length; i++) {
                    console.log(data[i]);
                    $('#content').append('<h3>'+data[i].title+'</h3><p>'+data[i].body+'</p>');
                }
            }
        }
    });

    var cid = $('#id').val();
    var name = $('#name').val();
    var address = $('#address').val();
    $('#btn-ajax-post').on('click', function () {

        $.ajax({
            url: "http://localhost:8080/Day_02_Application_Web_exploded/customer?id=" + cid + "&name=" + name + "&address=" + address,
            method: 'POST',
            success: function (response)//catch the response with a para
            {
                // console.log(response);
                for (let i=0; i<response.length; i++) {
                    console.log(response[i]);
                    $('#content-ajax').append('<h3>'+response[i].title+'</h3><p>'+response[i].body+'</p>');
                }
            },
            error: function () {
                console.log('Error');
            }
        })
    });

    $('#btn-ajax-put').on('click', function () {

        $.ajax({
            url: "http://localhost:8080/Day_02_Application_Web_exploded/customer?id=" + cid + "&name=" + name + "&address=" + address,
            method: 'PUT',
            success: function (response)//catch the response with a para
            {
                // console.log(response);
                for (let i=0; i<response.length; i++) {
                    console.log(response[i]);
                    $('#content-ajax').append('<h3>'+response[i].title+'</h3><p>'+response[i].body+'</p>');
                }
            },
            error: function () {
                console.log('Error');
            }
        })
    });

    $('#btn-ajax-delete').on('click', function () {

        $.ajax({
            url: "http://localhost:8080/Day_02_Application_Web_exploded/customer?id=" + cid + "&name=" + name + "&address=" + address,
            method: 'DELETE',
            success: function (response)//catch the response with a para
            {
                // console.log(response);
                for (let i=0; i<response.length; i++) {
                    console.log(response[i]);
                    $('#content-ajax').append('<h3>'+response[i].title+'</h3><p>'+response[i].body+'</p>');
                }
            },
            error: function () {
                console.log('Error');
            }
        })
    });

</script>

</body>
</html>