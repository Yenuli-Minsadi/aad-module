<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<h1>Customer</h1>
<div>
        <button onclick="window.location.href='customer.html'">Customer</button>
        <button onclick="window.location.href='../index.html'">Home</button>
        <button onclick="window.location.href='item.html'">Item</button>
        <button onclick="window.location.href='order.html'">Order</button>
</div>
<div>
    <input type="text" id="cust-id" placeholder="Customer Id">
    <input type="text" id="cust-name" placeholder="Customer Name">
    <input type="text" id="cust-address" placeholder="Customer address">
    <button onclick="saveCustomer()">Save</button>
    <button onclick="updateCustomer()">Update</button>
    <button onclick="deleteCustomer()">Delete</button>
</div>
<div>
    <table id="customer-table">
        <thead>
        <tr>
            <th>Customer Id</th>
            <th>Customer Name</th>
            <th>Customer Address</th>
        </tr>
        </thead>
        <tbody id="customer-list">

        </tbody>
    </table>
</div>
<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
<script>
    // window.onload(
    //     getAllCustomer()
    // )
    function saveCustomer() {
        const cid = $('#cust-id').val();
        const cname = $('#cust-name').val();
        const caddress = $('#cust-address').val();
        alert(cid+cname+caddress);

        $.ajax({
            url: 'http://localhost:8080/Day5_POS_Backend_Web_exploded/api/v1/customer',
            method: 'POST',
            contentType: 'application/json',
            data:JSON.stringify({
                "cid":cid,
                "cname": cname,
                "caddress": caddress,
            }),
            success: function (resp) {
                console.log(resp);
                getAllCustomer();
            },
            error: function (error) {
                console.log(error);
            }
        })
    }

    function updateCustomer() {
        const cid = $('#cust-id').val();
        const cname = $('#cust-name').val();
        const caddress = $('#cust-address').val();
        alert(cid+cname+caddress);

        $.ajax({
            url: 'http://localhost:8080/Day5_POS_Backend_Web_exploded/api/v1/customer',
            method: 'PUT',
            contentType: 'application/json',
            data:JSON.stringify({
                "cid":cid,
                "cname": cname,
                "caddress": caddress,
            }),
            success: function (resp) {
                console.log(resp);
                getAllCustomer();
            },
            error: function (error) {
                console.log(error);
            }
        })
    }

    function deleteCustomer() {
        const cid = $('#cust-id').val();

        // alert(cid+cname+caddress);

        $.ajax({
            url: 'http://localhost:8080/Day5_POS_Backend_Web_exploded/api/v1/customer?cid'+cid,
            method: 'DELETE',
            contentType: 'application/json',
            success: function (resp) {
                console.log(resp);
                getAllCustomer();
            },
            error: function (error) {
                console.log(error);
            }
        })
    }
    function getAllCustomer() {
        $.ajax({
            url:'http://localhost:8080/Day5_POS_Backend_Web_exploded/api/v1/customer',
            method:'GET',
            success:function (response) {
                $('#customer-list').empty()
                for(let customer of response){
                    const row ="<tr><td>"+customer.cid+"</td><td>"+customer.cname+"</td><td>"+customer.caddress+"</td></tr>"
                    $('#customer-list').append(row)
                }

            },
            error:function (error) {
                console.log(error)
            }
        })
    }
</script>
</body>
</html>